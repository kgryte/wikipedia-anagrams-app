/**
*
*	LOGGER
*
*
*	DESCRIPTION:
*		- Returns an application logger as a singleton.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

// MODULES //

var bunyan = require( 'bunyan' ),
	pkginfo = require( 'pkginfo' ),
	config = require( 'config' );


// VARIABLES //

var ENV = 'dev';


// LOGGER //

/**
* FUNCTION: create()
*	Creates a logger instance.
*
* @returns {Logger} Logger instance
*/
function create() {
	var logger = bunyan.createLogger({
		'name': pkginfo.read( require.main ).package.name,
		'streams': [
			{
				'name': 'main',
				'level': config.logger.level,
				'stream': process.stdout
			}
		],
		'serializers': {
			'request': bunyan.stdSerializers.req,
			'response': bunyan.stdSerializers.res,
			'error': bunyan.stdSerializers.err
		}
	});
	logger.info( 'Logger initialized.' );
	logger.info( 'Environment configuration: %s.', process.env.NODE_ENV || ENV );
	return logger;
} // end FUNCTION create()


// EXPORTS //

module.exports = create(); // singleton
